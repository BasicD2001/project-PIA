{"ast":null,"code":"import Dekorater from '../models/dekorater';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/user.service\";\nimport * as i2 from \"@angular/router\";\nexport class DekoraterOdrzavanjaComponent {\n  constructor(servis, ruter) {\n    this.servis = servis;\n    this.ruter = ruter;\n    this.posloviZahtev = [];\n    this.dekorater = new Dekorater();\n    this.komentar = '';\n    this.error = '';\n  }\n  ngOnInit() {\n    let naziv = localStorage.getItem('ulogovan');\n    naziv = naziv == null ? '' : naziv;\n    this.servis.getDekorater(naziv).subscribe(d => {\n      this.dekorater = d;\n      this.servis.posloviFirmeZahtev(this.dekorater.firma).subscribe(p => {\n        this.posloviZahtev = p;\n      });\n    });\n  }\n  prihvati(posao) {\n    this.servis.dekoraterPrihvatiZahtev(this.dekorater.korisnicko_ime, posao.id).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Uspesno prihvacen posao');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n  odbij(posao) {\n    if (!this.komentar) {\n      this.error = 'Kod odbijanja zahteva morate uneti komentar!';\n    }\n    this.error = '';\n    this.servis.dekoraterOdbijZahtev(this.komentar, posao.id).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Uspesno odbijen posao');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n  static #_ = this.ɵfac = function DekoraterOdrzavanjaComponent_Factory(t) {\n    return new (t || DekoraterOdrzavanjaComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DekoraterOdrzavanjaComponent,\n    selectors: [[\"app-dekorater-odrzavanja\"]],\n    decls: 2,\n    vars: 0,\n    template: function DekoraterOdrzavanjaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"dekorater-odrzavanja works!\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["Dekorater","DekoraterOdrzavanjaComponent","constructor","servis","ruter","posloviZahtev","dekorater","komentar","error","ngOnInit","naziv","localStorage","getItem","getDekorater","subscribe","d","posloviFirmeZahtev","firma","p","prihvati","posao","dekoraterPrihvatiZahtev","korisnicko_ime","id","poruka","msg","alert","odbij","dekoraterOdbijZahtev","_","i0","ɵɵdirectiveInject","i1","UserService","i2","Router","_2","selectors","decls","vars","template","DekoraterOdrzavanjaComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd"],"sources":["D:\\projekat-pia\\front\\app\\src\\app\\dekorater-odrzavanja\\dekorater-odrzavanja.component.ts","D:\\projekat-pia\\front\\app\\src\\app\\dekorater-odrzavanja\\dekorater-odrzavanja.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../services/user.service';\nimport { Router } from '@angular/router';\nimport Posao from '../models/posao';\nimport Dekorater from '../models/dekorater';\n\n@Component({\n  selector: 'app-dekorater-odrzavanja',\n  templateUrl: './dekorater-odrzavanja.component.html',\n  styleUrls: ['./dekorater-odrzavanja.component.css']\n})\nexport class DekoraterOdrzavanjaComponent implements OnInit {\n\n  constructor(private servis:UserService,private ruter:Router){}\n\n\n  posloviZahtev:Posao[]=[]\n\n  dekorater:Dekorater=new Dekorater()\n\n  komentar:string=''\n  error=''\n\n  ngOnInit(): void {\n\n    let naziv=localStorage.getItem('ulogovan')\n    naziv=naziv==null?'':naziv\n    this.servis.getDekorater(naziv).subscribe(\n      d=>{\n        this.dekorater=d\n\n        this.servis.posloviFirmeZahtev(this.dekorater.firma).subscribe(\n          p=>{\n            this.posloviZahtev=p\n          }\n        )\n      }\n    )\n      \n  }\n\n  prihvati(posao:Posao){\n    this.servis.dekoraterPrihvatiZahtev(this.dekorater.korisnicko_ime,posao.id).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Uspesno prihvacen posao')\n          this.ngOnInit()\n        }\n        else {\n          alert('Doslo je do greske')\n        }\n      }\n    )\n  }\n\n  odbij(posao:Posao){\n    if(!this.komentar){\n      this.error='Kod odbijanja zahteva morate uneti komentar!'\n    }\n    this.error=''\n    this.servis.dekoraterOdbijZahtev(this.komentar,posao.id).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Uspesno odbijen posao')\n          this.ngOnInit()\n        }\n        else {\n          alert('Doslo je do greske')\n          \n\n        }\n      }\n    )\n  }\n\n}\n","<p>dekorater-odrzavanja works!</p>\n"],"mappings":"AAIA,OAAOA,SAAS,MAAM,qBAAqB;;;;AAO3C,OAAM,MAAOC,4BAA4B;EAEvCC,YAAoBC,MAAkB,EAASC,KAAY;IAAvC,KAAAD,MAAM,GAANA,MAAM;IAAqB,KAAAC,KAAK,GAALA,KAAK;IAGpD,KAAAC,aAAa,GAAS,EAAE;IAExB,KAAAC,SAAS,GAAW,IAAIN,SAAS,EAAE;IAEnC,KAAAO,QAAQ,GAAQ,EAAE;IAClB,KAAAC,KAAK,GAAC,EAAE;EARqD;EAU7DC,QAAQA,CAAA;IAEN,IAAIC,KAAK,GAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC1CF,KAAK,GAACA,KAAK,IAAE,IAAI,GAAC,EAAE,GAACA,KAAK;IAC1B,IAAI,CAACP,MAAM,CAACU,YAAY,CAACH,KAAK,CAAC,CAACI,SAAS,CACvCC,CAAC,IAAE;MACD,IAAI,CAACT,SAAS,GAACS,CAAC;MAEhB,IAAI,CAACZ,MAAM,CAACa,kBAAkB,CAAC,IAAI,CAACV,SAAS,CAACW,KAAK,CAAC,CAACH,SAAS,CAC5DI,CAAC,IAAE;QACD,IAAI,CAACb,aAAa,GAACa,CAAC;MACtB,CAAC,CACF;IACH,CAAC,CACF;EAEH;EAEAC,QAAQA,CAACC,KAAW;IAClB,IAAI,CAACjB,MAAM,CAACkB,uBAAuB,CAAC,IAAI,CAACf,SAAS,CAACgB,cAAc,EAACF,KAAK,CAACG,EAAE,CAAC,CAACT,SAAS,CACnFU,MAAM,IAAE;MACN,IAAGA,MAAM,CAACC,GAAG,IAAE,IAAI,EAAC;QAClBC,KAAK,CAAC,yBAAyB,CAAC;QAChC,IAAI,CAACjB,QAAQ,EAAE;OAChB,MACI;QACHiB,KAAK,CAAC,oBAAoB,CAAC;;IAE/B,CAAC,CACF;EACH;EAEAC,KAAKA,CAACP,KAAW;IACf,IAAG,CAAC,IAAI,CAACb,QAAQ,EAAC;MAChB,IAAI,CAACC,KAAK,GAAC,8CAA8C;;IAE3D,IAAI,CAACA,KAAK,GAAC,EAAE;IACb,IAAI,CAACL,MAAM,CAACyB,oBAAoB,CAAC,IAAI,CAACrB,QAAQ,EAACa,KAAK,CAACG,EAAE,CAAC,CAACT,SAAS,CAChEU,MAAM,IAAE;MACN,IAAGA,MAAM,CAACC,GAAG,IAAE,IAAI,EAAC;QAClBC,KAAK,CAAC,uBAAuB,CAAC;QAC9B,IAAI,CAACjB,QAAQ,EAAE;OAChB,MACI;QACHiB,KAAK,CAAC,oBAAoB,CAAC;;IAI/B,CAAC,CACF;EACH;EAAC,QAAAG,CAAA,G;qBA9DU5B,4BAA4B,EAAA6B,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;UAA5BnC,4BAA4B;IAAAoC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,QAAA,WAAAC,sCAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCXzCZ,EAAA,CAAAc,cAAA,QAAG;QAAAd,EAAA,CAAAe,MAAA,kCAA2B;QAAAf,EAAA,CAAAgB,YAAA,EAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}