{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Dekorater from '../models/dekorater';\nexport let DekoraterOdrzavanjaComponent = class DekoraterOdrzavanjaComponent {\n  constructor(servis, ruter) {\n    this.servis = servis;\n    this.ruter = ruter;\n    this.posloviZahtev = [];\n    this.dekorater = new Dekorater();\n    this.posloviDekorater = [];\n    this.komentar = '';\n    this.error = '';\n    this.picture = null;\n  }\n  ngOnInit() {\n    let naziv = localStorage.getItem('ulogovan');\n    naziv = naziv == null ? '' : naziv;\n    this.servis.getDekorater(naziv).subscribe(d => {\n      this.dekorater = d;\n      this.servis.posloviFirmeZahtev(this.dekorater.firma).subscribe(p => {\n        this.posloviZahtev = p;\n      });\n      this.servis.dekoraterPoslovi(this.dekorater.korisnicko_ime).subscribe(p => {\n        this.posloviDekorater = p;\n      });\n    });\n  }\n  prihvati(posao) {\n    this.servis.dekoraterPrihvatiZahtev(this.dekorater.korisnicko_ime, posao.id).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Uspesno prihvacen posao');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n  odbij(posao) {\n    if (!this.komentar) {\n      alert('Morate uneti komentar kod odbijenice');\n      return;\n    }\n    this.error = '';\n    this.servis.dekoraterOdbijZahtev(this.komentar, posao.id).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Uspesno odbijen posao');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file && (file.type === 'image/jpeg' || file.type === 'image/png')) {\n      this.picture = file; // Čuva sliku ako je u pravilnom formatu\n    } else {\n      alert(\"Samo JPG/PNG formati su podržani!\");\n    }\n  }\n  dodajSliku(p) {\n    if (!this.picture) {\n      alert('Morate dodati sliku!');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('slika', this.picture);\n    formData.append('id', p.id.toString());\n    this.servis.dodajSlikuBaste(formData).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Slika je sacuvana!');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n};\nDekoraterOdrzavanjaComponent = __decorate([Component({\n  selector: 'app-dekorater-odrzavanja',\n  templateUrl: './dekorater-odrzavanja.component.html',\n  styleUrls: ['./dekorater-odrzavanja.component.css']\n})], DekoraterOdrzavanjaComponent);","map":{"version":3,"names":["Component","Dekorater","DekoraterOdrzavanjaComponent","constructor","servis","ruter","posloviZahtev","dekorater","posloviDekorater","komentar","error","picture","ngOnInit","naziv","localStorage","getItem","getDekorater","subscribe","d","posloviFirmeZahtev","firma","p","dekoraterPoslovi","korisnicko_ime","prihvati","posao","dekoraterPrihvatiZahtev","id","poruka","msg","alert","odbij","dekoraterOdbijZahtev","onFileSelected","event","file","target","files","type","dodajSliku","formData","FormData","append","toString","dodajSlikuBaste","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\projekat-pia\\front\\app\\src\\app\\dekorater-odrzavanja\\dekorater-odrzavanja.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../services/user.service';\nimport { Router } from '@angular/router';\nimport Posao from '../models/posao';\nimport Dekorater from '../models/dekorater';\n\n@Component({\n  selector: 'app-dekorater-odrzavanja',\n  templateUrl: './dekorater-odrzavanja.component.html',\n  styleUrls: ['./dekorater-odrzavanja.component.css']\n})\nexport class DekoraterOdrzavanjaComponent implements OnInit {\n\n  constructor(private servis:UserService,private ruter:Router){}\n\n\n  posloviZahtev:Posao[]=[]\n\n  dekorater:Dekorater=new Dekorater()\n\n  posloviDekorater:Posao[]=[]\n\n  komentar:string=''\n  error=''\n\n  picture: File | null = null\n\n  ngOnInit(): void {\n\n    let naziv=localStorage.getItem('ulogovan')\n    naziv=naziv==null?'':naziv\n    this.servis.getDekorater(naziv).subscribe(\n      d=>{\n        this.dekorater=d\n\n        this.servis.posloviFirmeZahtev(this.dekorater.firma).subscribe(\n          p=>{\n            this.posloviZahtev=p\n          }\n        )\n\n        this.servis.dekoraterPoslovi(this.dekorater.korisnicko_ime).subscribe(\n          p=>{\n            this.posloviDekorater=p\n          }\n        )\n      }\n    )\n      \n  }\n\n  prihvati(posao:Posao){\n    this.servis.dekoraterPrihvatiZahtev(this.dekorater.korisnicko_ime,posao.id).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Uspesno prihvacen posao')\n          this.ngOnInit()\n        }\n        else {\n          alert('Doslo je do greske')\n        }\n      }\n    )\n  }\n\n  odbij(posao:Posao){\n    if(!this.komentar){\n      alert('Morate uneti komentar kod odbijenice')\n      return\n    }\n    this.error=''\n    this.servis.dekoraterOdbijZahtev(this.komentar,posao.id).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Uspesno odbijen posao')\n          this.ngOnInit()\n        }\n        else {\n          alert('Doslo je do greske')\n          \n\n        }\n      }\n    )\n  }\n\n  onFileSelected(event: any): void {\n    const file: File = event.target.files[0];\n    if (file && (file.type === 'image/jpeg' || file.type === 'image/png')) {\n      this.picture = file;  // Čuva sliku ako je u pravilnom formatu\n    } else {\n      alert(\"Samo JPG/PNG formati su podržani!\");\n    }\n  }\n  dodajSliku(p:Posao){\n    if(!this.picture){\n      alert('Morate dodati sliku!')\n      return\n    }\n    const formData = new FormData();\n    formData.append('slika',this.picture)\n    formData.append('id',p.id.toString())\n    this.servis.dodajSlikuBaste(formData).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Slika je sacuvana!')\n          this.ngOnInit()\n        } else {\n          alert('Doslo je do greske')\n        }\n      }\n    )\n\n\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}