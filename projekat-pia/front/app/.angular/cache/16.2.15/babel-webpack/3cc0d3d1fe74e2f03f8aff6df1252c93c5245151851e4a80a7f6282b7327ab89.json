{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction OdrzavanjeComponent_tr_45_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"b:\", c_r2.brojBazena, \"\");\n  }\n}\nfunction OdrzavanjeComponent_tr_45_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"f:\", c_r2.brojFontana, \"\");\n  }\n}\nfunction OdrzavanjeComponent_tr_45_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function OdrzavanjeComponent_tr_45_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const c_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.zakazi(c_r2));\n    });\n    i0.ɵɵtext(1, \"Zakazi\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OdrzavanjeComponent_tr_45_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p\");\n  }\n}\nfunction OdrzavanjeComponent_tr_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtemplate(10, OdrzavanjeComponent_tr_45_div_10_Template, 2, 1, \"div\", 12);\n    i0.ɵɵtemplate(11, OdrzavanjeComponent_tr_45_div_11_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtemplate(13, OdrzavanjeComponent_tr_45_button_13_Template, 2, 0, \"button\", 13);\n    i0.ɵɵtemplate(14, OdrzavanjeComponent_tr_45_p_14_Template, 1, 0, \"p\", 12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const c_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r2.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r2.datumKraja);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r2.tip);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r2.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", c_r2.tip == \"privatna\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", c_r2.tip == \"restoran\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isMoreThanSixMonths(c_r2.odrzavanje));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isMoreThanSixMonths(c_r2.odrzavanje));\n  }\n}\nfunction OdrzavanjeComponent_tr_61_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"b:\", c_r12.brojBazena, \"\");\n  }\n}\nfunction OdrzavanjeComponent_tr_61_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const c_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"f:\", c_r12.brojFontana, \"\");\n  }\n}\nfunction OdrzavanjeComponent_tr_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtemplate(10, OdrzavanjeComponent_tr_61_div_10_Template, 2, 1, \"div\", 12);\n    i0.ɵɵtemplate(11, OdrzavanjeComponent_tr_61_div_11_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const c_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r12.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r12.datumKraja);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r12.tip);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(c_r12.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", c_r12.tip == \"privatna\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", c_r12.tip == \"restoran\");\n  }\n}\nexport class OdrzavanjeComponent {\n  constructor(servis, ruter) {\n    this.servis = servis;\n    this.ruter = ruter;\n    this.zavrseni = [];\n    this.cekaju = [];\n    this.vlasnik = '';\n  }\n  ngOnInit() {\n    let naziv = localStorage.getItem('ulogovan');\n    this.vlasnik = naziv == null ? '' : naziv;\n    this.servis.odrzavanje(this.vlasnik).subscribe(o => {\n      o.forEach(element => {\n        if (element.datumZakazivanja && element.datumZakazivanja < new Date().toISOString().split('T')[0]) {\n          this.servis.changeOdrzavanje(element.id).subscribe();\n        }\n      });\n      this.servis.PosaoZavrseno(this.vlasnik).subscribe(d => {\n        this.zavrseni = d;\n      });\n      this.servis.posaoZahtev(this.vlasnik).subscribe(c => {\n        this.cekaju = c;\n        this.servis.odrzavanje(this.vlasnik).subscribe(p => {\n          p.forEach(posao => {\n            this.cekaju.push(posao);\n          });\n        });\n      });\n    });\n  }\n  isMoreThanSixMonths(dateOdrzavanja) {\n    if (!dateOdrzavanja) return true;\n    let danasnjiDatum = new Date().toISOString().split('T')[0];\n    const datumOdrzavanja = new Date(dateOdrzavanja);\n    const danasnjiDatumObj = new Date(danasnjiDatum);\n    // Dodajte 6 meseci na datumOdrzavanja\n    const sixMonthsLater = new Date(datumOdrzavanja);\n    sixMonthsLater.setMonth(sixMonthsLater.getMonth() + 6);\n    // Proverite da li je danasnjiDatum kasniji od sixMonthsLater\n    return danasnjiDatumObj > sixMonthsLater;\n  }\n  zakazi(posao) {\n    localStorage.setItem('brojOdPosla', JSON.stringify(posao));\n    this.ruter.navigate(['zakazi-odrzavanje']);\n  }\n  static #_ = this.ɵfac = function OdrzavanjeComponent_Factory(t) {\n    return new (t || OdrzavanjeComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OdrzavanjeComponent,\n    selectors: [[\"app-odrzavanje\"]],\n    decls: 65,\n    vars: 2,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [\"href\", \"/\"], [\"href\", \"/vlasnik\"], [\"href\", \"/firme\"], [\"href\", \"/zakazivanja\"], [\"href\", \"/odrzavanje\"], [1, \"main-content\"], [1, \"table-container\"], [1, \"data-table\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"]],\n    template: function OdrzavanjeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n        i0.ɵɵelementStart(4, \"title\");\n        i0.ɵɵtext(5, \"Po\\u010Detna Stranica\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"body\")(7, \"header\")(8, \"h1\");\n        i0.ɵɵtext(9, \"Dobrodo\\u0161li!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"nav\")(11, \"ul\")(12, \"li\")(13, \"a\", 3);\n        i0.ɵɵtext(14, \"Home\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"li\")(16, \"a\", 4);\n        i0.ɵɵtext(17, \"Profil\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"li\")(19, \"a\", 5);\n        i0.ɵɵtext(20, \"Firme\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"li\")(22, \"a\", 6);\n        i0.ɵɵtext(23, \"Zakazivanja\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"li\")(25, \"a\", 7);\n        i0.ɵɵtext(26, \"Odrzavanja\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(27, \"div\", 8)(28, \"div\", 9)(29, \"h2\");\n        i0.ɵɵtext(30, \"Zavr\\u0161eni poslovi\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"table\", 10)(32, \"tr\")(33, \"th\");\n        i0.ɵɵtext(34, \"Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"th\");\n        i0.ɵɵtext(36, \"Datum zavr\\u0161etka\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"th\");\n        i0.ɵɵtext(38, \"Tip\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"th\");\n        i0.ɵɵtext(40, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"th\");\n        i0.ɵɵtext(42, \"Broj ba\\u0161ta/fontana\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"th\");\n        i0.ɵɵtext(44, \"Zakazi servisiranje\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(45, OdrzavanjeComponent_tr_45_Template, 15, 8, \"tr\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(46, \"div\", 9)(47, \"h2\");\n        i0.ɵɵtext(48, \"Poslovi u fazi odr\\u017Eavanja ili \\u010Dekaju majstore\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"table\", 10)(50, \"tr\")(51, \"th\");\n        i0.ɵɵtext(52, \"Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"th\");\n        i0.ɵɵtext(54, \"Datum zavr\\u0161etka\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"th\");\n        i0.ɵɵtext(56, \"Tip\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"th\");\n        i0.ɵɵtext(58, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(59, \"th\");\n        i0.ɵɵtext(60, \"Broj ba\\u0161ta/fontana\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(61, OdrzavanjeComponent_tr_61_Template, 12, 6, \"tr\", 11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(62, \"footer\")(63, \"p\");\n        i0.ɵɵtext(64, \"\\u00A9 2024 Va\\u0161a ba\\u0161ta. Sva prava zadr\\u017Eana.\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(45);\n        i0.ɵɵproperty(\"ngForOf\", ctx.zavrseni);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cekaju);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf],\n    styles: [\"body[_ngcontent-%COMP%] {\\n    font-family: Arial, sans-serif;\\n    line-height: 1.6;\\n    margin: 0;\\n    padding: 0;\\n    background-color: #f4f4f4;\\n}\\n\\n.main-content[_ngcontent-%COMP%] {\\n    max-width: 1200px;\\n    margin: 20px auto;\\n    padding: 20px;\\n    background: #fff;\\n    border-radius: 8px;\\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\\n}\\n\\n.table-container[_ngcontent-%COMP%] {\\n    margin-bottom: 100px;\\n    margin-top: 30px;\\n}\\n\\n.table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n    font-size: 1.5em;\\n    margin-bottom: 10px;\\n    border-bottom: 2px solid #ddd;\\n    padding-bottom: 5px;\\n}\\n\\n.data-table[_ngcontent-%COMP%] {\\n    width: 100%;\\n    border-collapse: collapse;\\n    margin-top: 20px;\\n}\\n\\n.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    padding: 12px;\\n    text-align: left;\\n    border-bottom: 1px solid #ddd;\\n}\\n\\n.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n    background-color: #f4f4f4;\\n    font-weight: bold;\\n}\\n\\n.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) {\\n    background-color: #f9f9f9;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n    padding: 8px 12px;\\n    border: none;\\n    border-radius: 4px;\\n    background-color: #007BFF;\\n    color: white;\\n    cursor: pointer;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n    background-color: #0056b3;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvb2RyemF2YW5qZS9vZHJ6YXZhbmplLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSw4QkFBOEI7SUFDOUIsZ0JBQWdCO0lBQ2hCLFNBQVM7SUFDVCxVQUFVO0lBQ1YseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtJQUNsQix3Q0FBd0M7QUFDNUM7O0FBRUE7SUFDSSxvQkFBb0I7SUFDcEIsZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksZ0JBQWdCO0lBQ2hCLG1CQUFtQjtJQUNuQiw2QkFBNkI7SUFDN0IsbUJBQW1CO0FBQ3ZCOztBQUVBO0lBQ0ksV0FBVztJQUNYLHlCQUF5QjtJQUN6QixnQkFBZ0I7QUFDcEI7O0FBRUE7O0lBRUksYUFBYTtJQUNiLGdCQUFnQjtJQUNoQiw2QkFBNkI7QUFDakM7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixrQkFBa0I7SUFDbEIseUJBQXlCO0lBQ3pCLFlBQVk7SUFDWixlQUFlO0FBQ25COztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSB7XHJcbiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgICBsaW5lLWhlaWdodDogMS42O1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGY0ZjQ7XHJcbn1cclxuXHJcbi5tYWluLWNvbnRlbnQge1xyXG4gICAgbWF4LXdpZHRoOiAxMjAwcHg7XHJcbiAgICBtYXJnaW46IDIwcHggYXV0bztcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG5cclxuLnRhYmxlLWNvbnRhaW5lciB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMDBweDtcclxuICAgIG1hcmdpbi10b3A6IDMwcHg7XHJcbn1cclxuXHJcbi50YWJsZS1jb250YWluZXIgaDIge1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbiAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgI2RkZDtcclxuICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XHJcbn1cclxuXHJcbi5kYXRhLXRhYmxlIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbn1cclxuXHJcbi5kYXRhLXRhYmxlIHRoLFxyXG4uZGF0YS10YWJsZSB0ZCB7XHJcbiAgICBwYWRkaW5nOiAxMnB4O1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1xyXG59XHJcblxyXG4uZGF0YS10YWJsZSB0aCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNGY0O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbi5kYXRhLXRhYmxlIHRyOm50aC1jaGlsZChldmVuKSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5O1xyXG59XHJcblxyXG5idXR0b24ge1xyXG4gICAgcGFkZGluZzogOHB4IDEycHg7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3QkZGO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5idXR0b246aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMztcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","c_r2","brojBazena","brojFontana","ɵɵlistener","OdrzavanjeComponent_tr_45_button_13_Template_button_click_0_listener","ɵɵrestoreView","_r11","ɵɵnextContext","$implicit","ctx_r9","ɵɵresetView","zakazi","ɵɵelement","ɵɵtemplate","OdrzavanjeComponent_tr_45_div_10_Template","OdrzavanjeComponent_tr_45_div_11_Template","OdrzavanjeComponent_tr_45_button_13_Template","OdrzavanjeComponent_tr_45_p_14_Template","ɵɵtextInterpolate","id","datumKraja","tip","status","ɵɵproperty","ctx_r0","isMoreThanSixMonths","odrzavanje","c_r12","OdrzavanjeComponent_tr_61_div_10_Template","OdrzavanjeComponent_tr_61_div_11_Template","OdrzavanjeComponent","constructor","servis","ruter","zavrseni","cekaju","vlasnik","ngOnInit","naziv","localStorage","getItem","subscribe","o","forEach","element","datumZakazivanja","Date","toISOString","split","changeOdrzavanje","PosaoZavrseno","d","posaoZahtev","c","p","posao","push","dateOdrzavanja","danasnjiDatum","datumOdrzavanja","danasnjiDatumObj","sixMonthsLater","setMonth","getMonth","setItem","JSON","stringify","navigate","_","ɵɵdirectiveInject","i1","UserService","i2","Router","_2","selectors","decls","vars","consts","template","OdrzavanjeComponent_Template","rf","ctx","OdrzavanjeComponent_tr_45_Template","OdrzavanjeComponent_tr_61_Template"],"sources":["D:\\projekat-pia\\front\\app\\src\\app\\odrzavanje\\odrzavanje.component.ts","D:\\projekat-pia\\front\\app\\src\\app\\odrzavanje\\odrzavanje.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../services/user.service';\nimport { Route, Router } from '@angular/router';\nimport Posao from '../models/posao';\n\n@Component({\n  selector: 'app-odrzavanje',\n  templateUrl: './odrzavanje.component.html',\n  styleUrls: ['./odrzavanje.component.css']\n})\nexport class OdrzavanjeComponent  implements OnInit{\n  constructor(private servis:UserService,private ruter:Router){}\n\n  zavrseni:Posao[]=[]\n\n  cekaju:Posao[]=[]\n\n  vlasnik:string=''\n\n\n\n  ngOnInit(): void {\n    let naziv=localStorage.getItem('ulogovan')\n    this.vlasnik=naziv==null?'':naziv\n\n    this.servis.odrzavanje(this.vlasnik).subscribe(\n      o=>{\n        o.forEach(element => {\n            if(element.datumZakazivanja && element.datumZakazivanja<new Date().toISOString().split('T')[0]){\n              this.servis.changeOdrzavanje(element.id).subscribe(\n                \n              )\n            }\n            \n        });\n\n        this.servis.PosaoZavrseno(this.vlasnik).subscribe(\n          d=>{\n            this.zavrseni=d\n          }\n        )\n\n\n        this.servis.posaoZahtev(this.vlasnik).subscribe(\n          c=>{\n            this.cekaju=c\n\n            this.servis.odrzavanje(this.vlasnik).subscribe(\n              p=>{\n                p.forEach(posao => {\n                  this.cekaju.push(posao)\n                });\n              }\n            )\n  \n          \n          }\n        )   \n\n      }\n    )\n    \n  }\n\n   isMoreThanSixMonths(dateOdrzavanja:string):boolean {\n    if(!dateOdrzavanja) return true\n     let danasnjiDatum=new Date().toISOString().split('T')[0]\n    const datumOdrzavanja = new Date(dateOdrzavanja);\n    const danasnjiDatumObj = new Date(danasnjiDatum);\n\n    // Dodajte 6 meseci na datumOdrzavanja\n    const sixMonthsLater = new Date(datumOdrzavanja);\n    sixMonthsLater.setMonth(sixMonthsLater.getMonth() + 6);\n\n    // Proverite da li je danasnjiDatum kasniji od sixMonthsLater\n    return danasnjiDatumObj > sixMonthsLater;\n}\n\n  zakazi(posao:Posao){\n    localStorage.setItem('brojOdPosla',JSON.stringify(posao))\n    this.ruter.navigate(['zakazi-odrzavanje'])\n  }\n}\n","<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Početna Stranica</title>\n</head>\n<body>\n    <header>\n        <h1>Dobrodošli!</h1>\n        <nav>\n            <ul>\n                <li><a href=\"/\">Home</a></li>\n                <li><a href=\"/vlasnik\">Profil</a></li>\n                <li><a href=\"/firme\">Firme</a></li>\n                <li><a href=\"/zakazivanja\">Zakazivanja</a></li>\n                <li><a href=\"/odrzavanje\">Odrzavanja</a></li>\n            </ul>\n        </nav>\n    </header>\n\n    <div class=\"main-content\">\n        <div class=\"table-container\">\n            <h2>Završeni poslovi</h2>\n            <table class=\"data-table\">\n                <tr>\n                    <th>Id</th>\n                    <th>Datum završetka</th>\n                    <th>Tip</th>\n                    <th>Status</th>\n                    <th>Broj bašta/fontana</th>\n                    <th>Zakazi servisiranje</th>     \n                </tr>\n                <tr *ngFor=\"let c of zavrseni\">\n                    <td>{{c.id}}</td>\n                    <td>{{c.datumKraja}}</td>\n                    <td>{{c.tip}}</td>\n                    <td>{{c.status}}</td>\n                    <td>\n                        <div *ngIf=\"c.tip=='privatna'\">b:{{c.brojBazena}}</div>\n                        <div *ngIf=\"c.tip=='restoran'\">f:{{c.brojFontana}}</div>\n                    </td>\n                    <td >\n                        <button *ngIf=\"isMoreThanSixMonths(c.odrzavanje)\" (click)=\"zakazi(c)\">Zakazi</button>\n                        <p *ngIf=\"!isMoreThanSixMonths(c.odrzavanje)\"></p>\n                    </td>\n                </tr>\n            </table>\n        </div>\n\n        <div class=\"table-container\">\n            <h2>Poslovi u fazi održavanja ili čekaju majstore</h2>\n            <table class=\"data-table\">\n                <tr>\n                    <th>Id</th>\n                    <th>Datum završetka</th>\n                    <th>Tip</th>\n                    <th>Status</th>\n                    <th>Broj bašta/fontana</th>       \n                </tr>\n                <tr *ngFor=\"let c of cekaju\">\n                    <td>{{c.id}}</td>\n                    <td>{{c.datumKraja}}</td>\n                    <td>{{c.tip}}</td>\n                    <td>{{c.status}}</td>\n                    <td>\n                        <div *ngIf=\"c.tip=='privatna'\">b:{{c.brojBazena}}</div>\n                        <div *ngIf=\"c.tip=='restoran'\">f:{{c.brojFontana}}</div>\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n    <footer>\n        <p>&copy; 2024 Vaša bašta. Sva prava zadržana.</p>\n    </footer>\n</body>\n</html>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}