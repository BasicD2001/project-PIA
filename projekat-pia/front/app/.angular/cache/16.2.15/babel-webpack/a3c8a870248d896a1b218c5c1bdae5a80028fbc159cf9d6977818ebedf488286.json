{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport Dekorater from '../models/dekorater';\nexport let DekoraterOdrzavanjaComponent = class DekoraterOdrzavanjaComponent {\n  constructor(servis, ruter) {\n    this.servis = servis;\n    this.ruter = ruter;\n    this.posloviZahtev = [];\n    this.dekorater = new Dekorater();\n    this.komentar = '';\n    this.error = '';\n  }\n  ngOnInit() {\n    let naziv = localStorage.getItem('ulogovan');\n    naziv = naziv == null ? '' : naziv;\n    this.servis.getDekorater(naziv).subscribe(d => {\n      this.dekorater = d;\n      this.servis.posloviFirmeZahtev(this.dekorater.firma).subscribe(p => {\n        this.posloviZahtev = p;\n      });\n    });\n  }\n  prihvati(posao) {\n    this.servis.dekoraterPrihvatiZahtev(this.dekorater.korisnicko_ime, posao.id).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Uspesno prihvacen posao');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n  odbij(posao) {\n    if (!this.komentar) {\n      this.error = 'Kod odbijanja zahteva morate uneti komentar!';\n    }\n    this.error = '';\n    this.servis.dekoraterOdbijZahtev(this.komentar, posao.id).subscribe(poruka => {\n      if (poruka.msg == 'ok') {\n        alert('Uspesno odbijen posao');\n        this.ngOnInit();\n      } else {\n        alert('Doslo je do greske');\n      }\n    });\n  }\n};\nDekoraterOdrzavanjaComponent = __decorate([Component({\n  selector: 'app-dekorater-odrzavanja',\n  templateUrl: './dekorater-odrzavanja.component.html',\n  styleUrls: ['./dekorater-odrzavanja.component.css']\n})], DekoraterOdrzavanjaComponent);","map":{"version":3,"names":["Component","Dekorater","DekoraterOdrzavanjaComponent","constructor","servis","ruter","posloviZahtev","dekorater","komentar","error","ngOnInit","naziv","localStorage","getItem","getDekorater","subscribe","d","posloviFirmeZahtev","firma","p","prihvati","posao","dekoraterPrihvatiZahtev","korisnicko_ime","id","poruka","msg","alert","odbij","dekoraterOdbijZahtev","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\projekat-pia\\front\\app\\src\\app\\dekorater-odrzavanja\\dekorater-odrzavanja.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { UserService } from '../services/user.service';\nimport { Router } from '@angular/router';\nimport Posao from '../models/posao';\nimport Dekorater from '../models/dekorater';\n\n@Component({\n  selector: 'app-dekorater-odrzavanja',\n  templateUrl: './dekorater-odrzavanja.component.html',\n  styleUrls: ['./dekorater-odrzavanja.component.css']\n})\nexport class DekoraterOdrzavanjaComponent implements OnInit {\n\n  constructor(private servis:UserService,private ruter:Router){}\n\n\n  posloviZahtev:Posao[]=[]\n\n  dekorater:Dekorater=new Dekorater()\n\n  komentar:string=''\n  error=''\n\n  ngOnInit(): void {\n\n    let naziv=localStorage.getItem('ulogovan')\n    naziv=naziv==null?'':naziv\n    this.servis.getDekorater(naziv).subscribe(\n      d=>{\n        this.dekorater=d\n\n        this.servis.posloviFirmeZahtev(this.dekorater.firma).subscribe(\n          p=>{\n            this.posloviZahtev=p\n          }\n        )\n      }\n    )\n      \n  }\n\n  prihvati(posao:Posao){\n    this.servis.dekoraterPrihvatiZahtev(this.dekorater.korisnicko_ime,posao.id).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Uspesno prihvacen posao')\n          this.ngOnInit()\n        }\n        else {\n          alert('Doslo je do greske')\n        }\n      }\n    )\n  }\n\n  odbij(posao:Posao){\n    if(!this.komentar){\n      this.error='Kod odbijanja zahteva morate uneti komentar!'\n    }\n    this.error=''\n    this.servis.dekoraterOdbijZahtev(this.komentar,posao.id).subscribe(\n      poruka=>{\n        if(poruka.msg=='ok'){\n          alert('Uspesno odbijen posao')\n          this.ngOnInit()\n        }\n        else {\n          alert('Doslo je do greske')\n          \n\n        }\n      }\n    )\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAIjD,OAAOC,SAAS,MAAM,qBAAqB;AAOpC,WAAMC,4BAA4B,GAAlC,MAAMA,4BAA4B;EAEvCC,YAAoBC,MAAkB,EAASC,KAAY;IAAvC,KAAAD,MAAM,GAANA,MAAM;IAAqB,KAAAC,KAAK,GAALA,KAAK;IAGpD,KAAAC,aAAa,GAAS,EAAE;IAExB,KAAAC,SAAS,GAAW,IAAIN,SAAS,EAAE;IAEnC,KAAAO,QAAQ,GAAQ,EAAE;IAClB,KAAAC,KAAK,GAAC,EAAE;EARqD;EAU7DC,QAAQA,CAAA;IAEN,IAAIC,KAAK,GAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC1CF,KAAK,GAACA,KAAK,IAAE,IAAI,GAAC,EAAE,GAACA,KAAK;IAC1B,IAAI,CAACP,MAAM,CAACU,YAAY,CAACH,KAAK,CAAC,CAACI,SAAS,CACvCC,CAAC,IAAE;MACD,IAAI,CAACT,SAAS,GAACS,CAAC;MAEhB,IAAI,CAACZ,MAAM,CAACa,kBAAkB,CAAC,IAAI,CAACV,SAAS,CAACW,KAAK,CAAC,CAACH,SAAS,CAC5DI,CAAC,IAAE;QACD,IAAI,CAACb,aAAa,GAACa,CAAC;MACtB,CAAC,CACF;IACH,CAAC,CACF;EAEH;EAEAC,QAAQA,CAACC,KAAW;IAClB,IAAI,CAACjB,MAAM,CAACkB,uBAAuB,CAAC,IAAI,CAACf,SAAS,CAACgB,cAAc,EAACF,KAAK,CAACG,EAAE,CAAC,CAACT,SAAS,CACnFU,MAAM,IAAE;MACN,IAAGA,MAAM,CAACC,GAAG,IAAE,IAAI,EAAC;QAClBC,KAAK,CAAC,yBAAyB,CAAC;QAChC,IAAI,CAACjB,QAAQ,EAAE;OAChB,MACI;QACHiB,KAAK,CAAC,oBAAoB,CAAC;;IAE/B,CAAC,CACF;EACH;EAEAC,KAAKA,CAACP,KAAW;IACf,IAAG,CAAC,IAAI,CAACb,QAAQ,EAAC;MAChB,IAAI,CAACC,KAAK,GAAC,8CAA8C;;IAE3D,IAAI,CAACA,KAAK,GAAC,EAAE;IACb,IAAI,CAACL,MAAM,CAACyB,oBAAoB,CAAC,IAAI,CAACrB,QAAQ,EAACa,KAAK,CAACG,EAAE,CAAC,CAACT,SAAS,CAChEU,MAAM,IAAE;MACN,IAAGA,MAAM,CAACC,GAAG,IAAE,IAAI,EAAC;QAClBC,KAAK,CAAC,uBAAuB,CAAC;QAC9B,IAAI,CAACjB,QAAQ,EAAE;OAChB,MACI;QACHiB,KAAK,CAAC,oBAAoB,CAAC;;IAI/B,CAAC,CACF;EACH;CAED;AAhEYzB,4BAA4B,GAAA4B,UAAA,EALxC9B,SAAS,CAAC;EACT+B,QAAQ,EAAE,0BAA0B;EACpCC,WAAW,EAAE,uCAAuC;EACpDC,SAAS,EAAE,CAAC,sCAAsC;CACnD,CAAC,C,EACW/B,4BAA4B,CAgExC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}